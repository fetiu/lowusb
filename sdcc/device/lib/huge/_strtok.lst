                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 3.4.1 #9092 (Oct 23 2022) (Mac OS X x86_64)
                                      4 ; This file was generated Sun Oct 23 01:38:24 2022
                                      5 ;--------------------------------------------------------
                                      6 	.module _strtok
                                      7 	.optsdcc -mmcs51 --model-huge
                                      8 	
                                      9 ;--------------------------------------------------------
                                     10 ; Public variables in this module
                                     11 ;--------------------------------------------------------
                                     12 	.globl _strchr
                                     13 	.globl _strtok_PARM_2
                                     14 	.globl _strtok
                                     15 ;--------------------------------------------------------
                                     16 ; special function registers
                                     17 ;--------------------------------------------------------
                                     18 	.area RSEG    (ABS,DATA)
      000000                         19 	.org 0x0000
                                     20 ;--------------------------------------------------------
                                     21 ; special function bits
                                     22 ;--------------------------------------------------------
                                     23 	.area RSEG    (ABS,DATA)
      000000                         24 	.org 0x0000
                                     25 ;--------------------------------------------------------
                                     26 ; overlayable register banks
                                     27 ;--------------------------------------------------------
                                     28 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         29 	.ds 8
                                     30 ;--------------------------------------------------------
                                     31 ; internal ram data
                                     32 ;--------------------------------------------------------
                                     33 	.area DSEG    (DATA)
                                     34 ;--------------------------------------------------------
                                     35 ; overlayable items in internal ram 
                                     36 ;--------------------------------------------------------
                                     37 ;--------------------------------------------------------
                                     38 ; indirectly addressable internal ram data
                                     39 ;--------------------------------------------------------
                                     40 	.area ISEG    (DATA)
                                     41 ;--------------------------------------------------------
                                     42 ; absolute internal ram data
                                     43 ;--------------------------------------------------------
                                     44 	.area IABS    (ABS,DATA)
                                     45 	.area IABS    (ABS,DATA)
                                     46 ;--------------------------------------------------------
                                     47 ; bit data
                                     48 ;--------------------------------------------------------
                                     49 	.area BSEG    (BIT)
                                     50 ;--------------------------------------------------------
                                     51 ; paged external ram data
                                     52 ;--------------------------------------------------------
                                     53 	.area PSEG    (PAG,XDATA)
                                     54 ;--------------------------------------------------------
                                     55 ; external ram data
                                     56 ;--------------------------------------------------------
                                     57 	.area XSEG    (XDATA)
      000000                         58 _strtok_PARM_2:
      000000                         59 	.ds 3
      000003                         60 _strtok_str_1_21:
      000003                         61 	.ds 3
      000006                         62 _strtok_s_1_22:
      000006                         63 	.ds 3
      000009                         64 _strtok_s1_1_22:
      000009                         65 	.ds 3
                                     66 ;--------------------------------------------------------
                                     67 ; absolute external ram data
                                     68 ;--------------------------------------------------------
                                     69 	.area XABS    (ABS,XDATA)
                                     70 ;--------------------------------------------------------
                                     71 ; external initialized ram data
                                     72 ;--------------------------------------------------------
                                     73 	.area XISEG   (XDATA)
                                     74 	.area HOME    (CODE)
                                     75 	.area GSINIT0 (CODE)
                                     76 	.area GSINIT1 (CODE)
                                     77 	.area GSINIT2 (CODE)
                                     78 	.area GSINIT3 (CODE)
                                     79 	.area GSINIT4 (CODE)
                                     80 	.area GSINIT5 (CODE)
                                     81 	.area GSINIT  (CODE)
                                     82 	.area GSFINAL (CODE)
                                     83 	.area CSEG    (CODE)
                                     84 ;--------------------------------------------------------
                                     85 ; global & static initialisations
                                     86 ;--------------------------------------------------------
                                     87 	.area HOME    (CODE)
                                     88 	.area GSINIT  (CODE)
                                     89 	.area GSFINAL (CODE)
                                     90 	.area GSINIT  (CODE)
                                     91 ;--------------------------------------------------------
                                     92 ; Home
                                     93 ;--------------------------------------------------------
                                     94 	.area HOME    (CODE)
                                     95 	.area HOME    (CODE)
                                     96 ;--------------------------------------------------------
                                     97 ; code
                                     98 ;--------------------------------------------------------
                                     99 	.area CSEG    (CODE)
                                    100 ;------------------------------------------------------------
                                    101 ;Allocation info for local variables in function 'strtok'
                                    102 ;------------------------------------------------------------
                                    103 ;control                   Allocated with name '_strtok_PARM_2'
                                    104 ;str                       Allocated with name '_strtok_str_1_21'
                                    105 ;s                         Allocated with name '_strtok_s_1_22'
                                    106 ;s1                        Allocated with name '_strtok_s1_1_22'
                                    107 ;------------------------------------------------------------
                                    108 ;	_strtok.c:36: char * strtok ( char * str, const char * control )
                                    109 ;	-----------------------------------------
                                    110 ;	 function strtok
                                    111 ;	-----------------------------------------
      000000                        112 _strtok:
                           000007   113 	ar7 = 0x07
                           000006   114 	ar6 = 0x06
                           000005   115 	ar5 = 0x05
                           000004   116 	ar4 = 0x04
                           000003   117 	ar3 = 0x03
                           000002   118 	ar2 = 0x02
                           000001   119 	ar1 = 0x01
                           000000   120 	ar0 = 0x00
      000000 AF F0            [24]  121 	mov	r7,b
      000002 AE 83            [24]  122 	mov	r6,dph
      000004 E5 82            [12]  123 	mov	a,dpl
      000006 90r00r03         [24]  124 	mov	dptr,#_strtok_str_1_21
      000009 F0               [24]  125 	movx	@dptr,a
      00000A EE               [12]  126 	mov	a,r6
      00000B A3               [24]  127 	inc	dptr
      00000C F0               [24]  128 	movx	@dptr,a
      00000D EF               [12]  129 	mov	a,r7
      00000E A3               [24]  130 	inc	dptr
      00000F F0               [24]  131 	movx	@dptr,a
                                    132 ;	_strtok.c:41: if ( str )
      000010 90r00r03         [24]  133 	mov	dptr,#_strtok_str_1_21
      000013 E0               [24]  134 	movx	a,@dptr
      000014 FD               [12]  135 	mov	r5,a
      000015 A3               [24]  136 	inc	dptr
      000016 E0               [24]  137 	movx	a,@dptr
      000017 FE               [12]  138 	mov	r6,a
      000018 A3               [24]  139 	inc	dptr
      000019 E0               [24]  140 	movx	a,@dptr
      00001A FF               [12]  141 	mov	r7,a
      00001B 90r00r03         [24]  142 	mov	dptr,#_strtok_str_1_21
      00001E E0               [24]  143 	movx	a,@dptr
      00001F F5 F0            [12]  144 	mov	b,a
      000021 A3               [24]  145 	inc	dptr
      000022 E0               [24]  146 	movx	a,@dptr
      000023 45 F0            [12]  147 	orl	a,b
      000025 60 0B            [24]  148 	jz	00102$
                                    149 ;	_strtok.c:42: s = str;
      000027 90r00r06         [24]  150 	mov	dptr,#_strtok_s_1_22
      00002A ED               [12]  151 	mov	a,r5
      00002B F0               [24]  152 	movx	@dptr,a
      00002C EE               [12]  153 	mov	a,r6
      00002D A3               [24]  154 	inc	dptr
      00002E F0               [24]  155 	movx	@dptr,a
      00002F EF               [12]  156 	mov	a,r7
      000030 A3               [24]  157 	inc	dptr
      000031 F0               [24]  158 	movx	@dptr,a
      000032                        159 00102$:
                                    160 ;	_strtok.c:43: if ( !s )
      000032 90r00r06         [24]  161 	mov	dptr,#_strtok_s_1_22
      000035 E0               [24]  162 	movx	a,@dptr
      000036 F5 F0            [12]  163 	mov	b,a
      000038 A3               [24]  164 	inc	dptr
      000039 E0               [24]  165 	movx	a,@dptr
      00003A 45 F0            [12]  166 	orl	a,b
                                    167 ;	_strtok.c:44: return NULL;
      00003C 70 08            [24]  168 	jnz	00108$
      00003E 90 00 00         [24]  169 	mov	dptr,#0x0000
      000041 F5 F0            [12]  170 	mov	b,a
      000043 02r01r5A         [24]  171 	ljmp	00119$
                                    172 ;	_strtok.c:46: while (*s) {
      000046                        173 00108$:
      000046 90r00r06         [24]  174 	mov	dptr,#_strtok_s_1_22
      000049 E0               [24]  175 	movx	a,@dptr
      00004A FD               [12]  176 	mov	r5,a
      00004B A3               [24]  177 	inc	dptr
      00004C E0               [24]  178 	movx	a,@dptr
      00004D FE               [12]  179 	mov	r6,a
      00004E A3               [24]  180 	inc	dptr
      00004F E0               [24]  181 	movx	a,@dptr
      000050 FF               [12]  182 	mov	r7,a
      000051 8D 82            [24]  183 	mov	dpl,r5
      000053 8E 83            [24]  184 	mov	dph,r6
      000055 8F F0            [24]  185 	mov	b,r7
      000057 12r00r00         [24]  186 	lcall	__gptrget
      00005A FF               [12]  187 	mov	r7,a
      00005B 60 37            [24]  188 	jz	00110$
                                    189 ;	_strtok.c:47: if (strchr(control,*s))
      00005D 90r00r00         [24]  190 	mov	dptr,#_strtok_PARM_2
      000060 E0               [24]  191 	movx	a,@dptr
      000061 FC               [12]  192 	mov	r4,a
      000062 A3               [24]  193 	inc	dptr
      000063 E0               [24]  194 	movx	a,@dptr
      000064 FD               [12]  195 	mov	r5,a
      000065 A3               [24]  196 	inc	dptr
      000066 E0               [24]  197 	movx	a,@dptr
      000067 FE               [12]  198 	mov	r6,a
      000068 90r00r00         [24]  199 	mov	dptr,#_strchr_PARM_2
      00006B EF               [12]  200 	mov	a,r7
      00006C F0               [24]  201 	movx	@dptr,a
      00006D 8C 82            [24]  202 	mov	dpl,r4
      00006F 8D 83            [24]  203 	mov	dph,r5
      000071 8E F0            [24]  204 	mov	b,r6
      000073 78r00            [12]  205 	mov	r0,#_strchr
      000075 79s00            [12]  206 	mov	r1,#(_strchr >> 8)
      000077 7As00            [12]  207 	mov	r2,#(_strchr >> 16)
      000079 12r00r00         [24]  208 	lcall	__sdcc_banked_call
      00007C AD 82            [24]  209 	mov	r5,dpl
      00007E AE 83            [24]  210 	mov	r6,dph
      000080 AF F0            [24]  211 	mov	r7,b
      000082 ED               [12]  212 	mov	a,r5
      000083 4E               [12]  213 	orl	a,r6
      000084 60 0E            [24]  214 	jz	00110$
                                    215 ;	_strtok.c:48: s++;
      000086 90r00r06         [24]  216 	mov	dptr,#_strtok_s_1_22
      000089 E0               [24]  217 	movx	a,@dptr
      00008A 24 01            [12]  218 	add	a,#0x01
      00008C F0               [24]  219 	movx	@dptr,a
      00008D A3               [24]  220 	inc	dptr
      00008E E0               [24]  221 	movx	a,@dptr
      00008F 34 00            [12]  222 	addc	a,#0x00
      000091 F0               [24]  223 	movx	@dptr,a
                                    224 ;	_strtok.c:50: break;
      000092 80 B2            [24]  225 	sjmp	00108$
      000094                        226 00110$:
                                    227 ;	_strtok.c:53: s1 = s;
      000094 90r00r06         [24]  228 	mov	dptr,#_strtok_s_1_22
      000097 E0               [24]  229 	movx	a,@dptr
      000098 FD               [12]  230 	mov	r5,a
      000099 A3               [24]  231 	inc	dptr
      00009A E0               [24]  232 	movx	a,@dptr
      00009B FE               [12]  233 	mov	r6,a
      00009C A3               [24]  234 	inc	dptr
      00009D E0               [24]  235 	movx	a,@dptr
      00009E FF               [12]  236 	mov	r7,a
      00009F 90r00r09         [24]  237 	mov	dptr,#_strtok_s1_1_22
      0000A2 ED               [12]  238 	mov	a,r5
      0000A3 F0               [24]  239 	movx	@dptr,a
      0000A4 EE               [12]  240 	mov	a,r6
      0000A5 A3               [24]  241 	inc	dptr
      0000A6 F0               [24]  242 	movx	@dptr,a
      0000A7 EF               [12]  243 	mov	a,r7
      0000A8 A3               [24]  244 	inc	dptr
      0000A9 F0               [24]  245 	movx	@dptr,a
                                    246 ;	_strtok.c:55: while (*s) {
      0000AA                        247 00113$:
      0000AA 90r00r06         [24]  248 	mov	dptr,#_strtok_s_1_22
      0000AD E0               [24]  249 	movx	a,@dptr
      0000AE FD               [12]  250 	mov	r5,a
      0000AF A3               [24]  251 	inc	dptr
      0000B0 E0               [24]  252 	movx	a,@dptr
      0000B1 FE               [12]  253 	mov	r6,a
      0000B2 A3               [24]  254 	inc	dptr
      0000B3 E0               [24]  255 	movx	a,@dptr
      0000B4 FF               [12]  256 	mov	r7,a
      0000B5 8D 82            [24]  257 	mov	dpl,r5
      0000B7 8E 83            [24]  258 	mov	dph,r6
      0000B9 8F F0            [24]  259 	mov	b,r7
      0000BB 12r00r00         [24]  260 	lcall	__gptrget
      0000BE FF               [12]  261 	mov	r7,a
      0000BF 60 6C            [24]  262 	jz	00115$
                                    263 ;	_strtok.c:56: if (strchr(control,*s)) {
      0000C1 90r00r00         [24]  264 	mov	dptr,#_strtok_PARM_2
      0000C4 E0               [24]  265 	movx	a,@dptr
      0000C5 FC               [12]  266 	mov	r4,a
      0000C6 A3               [24]  267 	inc	dptr
      0000C7 E0               [24]  268 	movx	a,@dptr
      0000C8 FD               [12]  269 	mov	r5,a
      0000C9 A3               [24]  270 	inc	dptr
      0000CA E0               [24]  271 	movx	a,@dptr
      0000CB FE               [12]  272 	mov	r6,a
      0000CC 90r00r00         [24]  273 	mov	dptr,#_strchr_PARM_2
      0000CF EF               [12]  274 	mov	a,r7
      0000D0 F0               [24]  275 	movx	@dptr,a
      0000D1 8C 82            [24]  276 	mov	dpl,r4
      0000D3 8D 83            [24]  277 	mov	dph,r5
      0000D5 8E F0            [24]  278 	mov	b,r6
      0000D7 78r00            [12]  279 	mov	r0,#_strchr
      0000D9 79s00            [12]  280 	mov	r1,#(_strchr >> 8)
      0000DB 7As00            [12]  281 	mov	r2,#(_strchr >> 16)
      0000DD 12r00r00         [24]  282 	lcall	__sdcc_banked_call
      0000E0 AD 82            [24]  283 	mov	r5,dpl
      0000E2 AE 83            [24]  284 	mov	r6,dph
      0000E4 AF F0            [24]  285 	mov	r7,b
      0000E6 ED               [12]  286 	mov	a,r5
      0000E7 4E               [12]  287 	orl	a,r6
      0000E8 60 34            [24]  288 	jz	00112$
                                    289 ;	_strtok.c:57: *s++ = '\0';
      0000EA 90r00r06         [24]  290 	mov	dptr,#_strtok_s_1_22
      0000ED E0               [24]  291 	movx	a,@dptr
      0000EE FD               [12]  292 	mov	r5,a
      0000EF A3               [24]  293 	inc	dptr
      0000F0 E0               [24]  294 	movx	a,@dptr
      0000F1 FE               [12]  295 	mov	r6,a
      0000F2 A3               [24]  296 	inc	dptr
      0000F3 E0               [24]  297 	movx	a,@dptr
      0000F4 FF               [12]  298 	mov	r7,a
      0000F5 8D 82            [24]  299 	mov	dpl,r5
      0000F7 8E 83            [24]  300 	mov	dph,r6
      0000F9 8F F0            [24]  301 	mov	b,r7
      0000FB E4               [12]  302 	clr	a
      0000FC 12r00r00         [24]  303 	lcall	__gptrput
      0000FF 90r00r06         [24]  304 	mov	dptr,#_strtok_s_1_22
      000102 E0               [24]  305 	movx	a,@dptr
      000103 24 01            [12]  306 	add	a,#0x01
      000105 F0               [24]  307 	movx	@dptr,a
      000106 A3               [24]  308 	inc	dptr
      000107 E0               [24]  309 	movx	a,@dptr
      000108 34 00            [12]  310 	addc	a,#0x00
      00010A F0               [24]  311 	movx	@dptr,a
                                    312 ;	_strtok.c:58: return s1;
      00010B 90r00r09         [24]  313 	mov	dptr,#_strtok_s1_1_22
      00010E E0               [24]  314 	movx	a,@dptr
      00010F FD               [12]  315 	mov	r5,a
      000110 A3               [24]  316 	inc	dptr
      000111 E0               [24]  317 	movx	a,@dptr
      000112 FE               [12]  318 	mov	r6,a
      000113 A3               [24]  319 	inc	dptr
      000114 E0               [24]  320 	movx	a,@dptr
      000115 FF               [12]  321 	mov	r7,a
      000116 8D 82            [24]  322 	mov	dpl,r5
      000118 8E 83            [24]  323 	mov	dph,r6
      00011A 8F F0            [24]  324 	mov	b,r7
      00011C 80 3C            [24]  325 	sjmp	00119$
      00011E                        326 00112$:
                                    327 ;	_strtok.c:60: s++ ;
      00011E 90r00r06         [24]  328 	mov	dptr,#_strtok_s_1_22
      000121 E0               [24]  329 	movx	a,@dptr
      000122 24 01            [12]  330 	add	a,#0x01
      000124 F0               [24]  331 	movx	@dptr,a
      000125 A3               [24]  332 	inc	dptr
      000126 E0               [24]  333 	movx	a,@dptr
      000127 34 00            [12]  334 	addc	a,#0x00
      000129 F0               [24]  335 	movx	@dptr,a
      00012A 02r00rAA         [24]  336 	ljmp	00113$
      00012D                        337 00115$:
                                    338 ;	_strtok.c:63: s = NULL;
      00012D 90r00r06         [24]  339 	mov	dptr,#_strtok_s_1_22
      000130 E4               [12]  340 	clr	a
      000131 F0               [24]  341 	movx	@dptr,a
      000132 A3               [24]  342 	inc	dptr
      000133 F0               [24]  343 	movx	@dptr,a
      000134 A3               [24]  344 	inc	dptr
      000135 F0               [24]  345 	movx	@dptr,a
                                    346 ;	_strtok.c:65: if (*s1)
      000136 90r00r09         [24]  347 	mov	dptr,#_strtok_s1_1_22
      000139 E0               [24]  348 	movx	a,@dptr
      00013A FD               [12]  349 	mov	r5,a
      00013B A3               [24]  350 	inc	dptr
      00013C E0               [24]  351 	movx	a,@dptr
      00013D FE               [12]  352 	mov	r6,a
      00013E A3               [24]  353 	inc	dptr
      00013F E0               [24]  354 	movx	a,@dptr
      000140 FF               [12]  355 	mov	r7,a
      000141 8D 82            [24]  356 	mov	dpl,r5
      000143 8E 83            [24]  357 	mov	dph,r6
      000145 8F F0            [24]  358 	mov	b,r7
      000147 12r00r00         [24]  359 	lcall	__gptrget
      00014A 60 08            [24]  360 	jz	00117$
                                    361 ;	_strtok.c:66: return s1;
      00014C 8D 82            [24]  362 	mov	dpl,r5
      00014E 8E 83            [24]  363 	mov	dph,r6
      000150 8F F0            [24]  364 	mov	b,r7
      000152 80 06            [24]  365 	sjmp	00119$
      000154                        366 00117$:
                                    367 ;	_strtok.c:68: return NULL;
      000154 90 00 00         [24]  368 	mov	dptr,#0x0000
      000157 75 F0 00         [24]  369 	mov	b,#0x00
      00015A                        370 00119$:
      00015A 02r00r00         [24]  371 	ljmp	__sdcc_banked_ret
                                    372 	.area CSEG    (CODE)
                                    373 	.area CONST   (CODE)
                                    374 	.area XINIT   (CODE)
                                    375 	.area CABS    (ABS,CODE)
